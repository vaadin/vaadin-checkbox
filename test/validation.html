<!doctype html>

<head>
    <meta charset="UTF-8">
    <title>vaadin-checkbox-group tests</title>
    <script src="../../web-component-tester/browser.js"></script>
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../../iron-test-helpers/mock-interactions.html">
    <link rel="import" href="../vaadin-checkbox-group.html">
    <link rel="import" href="helpers.html">
</head>

<body>
<script>
  describe('initial validation', () => {
    let validateSpy;
    let group;

    beforeEach(() => {
      group = document.createElement('vaadin-checkbox-group');
      validateSpy = sinon.spy(group, 'validate');
    });

    afterEach(() => {
      group.remove();
    });

    it('should not validate by default', async() => {
      document.body.appendChild(group);
      await nextRender();
      expect(validateSpy.called).to.be.false;
    });

    it('should not validate when the field has an initial value', async() => {
      group.value = ['en'];
      document.body.appendChild(group);
      await nextRender();
      expect(validateSpy.called).to.be.false;
    });

    it('should not validate when the field has an initial value and invalid', async() => {
      group.value = ['en'];
      group.invalid = true;
      document.body.appendChild(group);
      await nextRender();
      expect(validateSpy.called).to.be.false;
    });
  });
</script>
</body>
